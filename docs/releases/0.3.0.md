# FreemanNotes 0.3.0 (2026-02-01)

Milestone release focusing on personalization, collaboration clarity, and UX.

## Highlights
- Preferences hub with submenus: Appearance, Colors, Drag & Animation, Collaborators.
- User profile photos with server-side resize/compress (Sharp), served under `/uploads/users/{id}.jpg`.
- Real-time photo propagation via events; immediate avatar updates with cache-busting.
- Collaborator chip display preference (`image+text` | `image` | `text`) persisted per-user.
- Per-user note color returned as `viewerColor` via `NotePref`.
- Event-driven UI updates: `note-shared`, `note-unshared`, `collab-removed`, `user-photo-updated`.

## Added
- Submenu-based Preferences UI with Back/Save flows.
- `POST /api/auth/me/photo` accepts dataURL; resizes to 256×256 JPEG; saves to `/uploads`.
- Broadcast `user-photo-updated` to all users sharing notes with the uploader.
- `PATCH /api/auth/me` accepts `chipDisplayMode`; client renders collaborator chips accordingly.
- `NotePref` model for per-user note color; `GET /api/notes` includes `viewerColor`.

## Changed
- Preferences consolidated; Save applies changes immediately (chip display via `authContext.updateMe`).
- Header simplified: avatar opens Preferences; Sign out located inside Preferences.
- Avatars standardized to 55×55 (header and preferences preview).
- Label text updated to “Collaborators”.

## Fixed
- Collaborator chips persist across refresh; rollback on failure when needed.
- First opener of checklist sees changes (Yjs structural gating corrected).
- Immediate photo refresh by appending `?v=timestamp` to `userImageUrl` post-upload.

## Removed
- Legacy tesseract OCR implementation, env vars, and references.

## Upgrade Notes
- Run `npm install` to ensure Sharp and dependencies are up to date.
- Ensure `/uploads` is served statically (configured in server).
- If Prisma type locks occur on Windows, close Node processes and re-run `prisma generate`.

See also: CHANGELOG entry for 0.3.0.
